#pragma checksum "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "e0e4539edcf7bfcdd41091244f8ee6c0d930e21b"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorChat.Client.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using BlazorChat.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\_Imports.razor"
using BlazorChat.Client.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
using Microsoft.AspNetCore.SignalR.Client;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
using Microsoft.Extensions.Logging;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
using BlazorChat.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
using System.Text.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
using BlazorChat.Client.Pages.QuatreMots;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/FourWordsGame")]
    public partial class FourWords : Microsoft.AspNetCore.Components.ComponentBase, IDisposable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<h3>FourWords</h3>\r\n\r\n\r\n\r\n\r\n");
#nullable restore
#line 17 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
 if (Joueur == null || !Joueur.EstEnJeu())
{    

#line default
#line hidden
#nullable disable
            __builder.AddContent(1, "    ");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "form-group");
            __builder.AddMarkupContent(4, "\r\n        ");
            __builder.OpenElement(5, "label");
            __builder.AddMarkupContent(6, "\r\n            Pseudonyme:\r\n            ");
            __builder.OpenElement(7, "input");
            __builder.AddAttribute(8, "size", "50");
            __builder.AddAttribute(9, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 22 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                          pseudo

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(10, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => pseudo = __value, pseudo));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(11, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(12, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(13, "\r\n");
#nullable restore
#line 26 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
     if (!PartieEnCours)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(14, "    ");
            __builder.OpenElement(15, "button");
            __builder.AddAttribute(16, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 28 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                      Jouer

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(17, "disabled", 
#nullable restore
#line 28 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                                         !IsConnected || pseudo.Length < 2

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(18, "Jouer");
            __builder.CloseElement();
            __builder.AddMarkupContent(19, "\r\n");
#nullable restore
#line 29 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
    } else
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(20, "        ");
            __builder.AddMarkupContent(21, "<p>Il y a déjà une partie en cours, merci de patienter calmement</p>\r\n");
#nullable restore
#line 32 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.AddContent(22, "    ");
            __builder.OpenElement(23, "label");
            __builder.AddMarkupContent(24, "Nombre de joueurs connectés: ");
            __builder.AddContent(25, 
#nullable restore
#line 34 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                                         nbJoueursConnectes

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(26, " / 4");
            __builder.CloseElement();
            __builder.AddMarkupContent(27, "\r\n");
#nullable restore
#line 35 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
     if (Joueur != null && Joueur.EtapeJeu == EtapeJeu.EnAttenteDeLancement)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(28, "        ");
            __builder.AddMarkupContent(29, "<label style=\"color:green\">Connecté: En attente de 4 joueurs</label>\r\n");
#nullable restore
#line 38 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 38 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
     

}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(30, "\r\n");
#nullable restore
#line 42 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
 if (Joueur != null && (Joueur.EtapeJeu == EtapeJeu.EstEnTrainDeDonnerIndice || Joueur.EtapeJeu == EtapeJeu.AFiniDeDonnerIndices))
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(31, "    \r\n    ");
            __builder.OpenComponent<BlazorChat.Client.Pages.QuatreMots.DonnerIndice>(32);
            __builder.AddAttribute(33, "Joueur", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<BlazorChat.Shared.Joueur>(
#nullable restore
#line 45 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                           Joueur

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(34, "hubConnection", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.SignalR.Client.HubConnection>(
#nullable restore
#line 45 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                                                   hubConnection

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(35, "\r\n");
#nullable restore
#line 48 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(36, "\r\n");
#nullable restore
#line 50 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
 if (Joueur != null && (Joueur.EtapeJeu == EtapeJeu.EstEnTrainDeDeviner || Joueur.EtapeJeu == EtapeJeu.AFiniDeDeviner))
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(37, "    ");
            __builder.OpenComponent<BlazorChat.Client.Pages.QuatreMots.DevinerMot>(38);
            __builder.AddAttribute(39, "Joueur", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<BlazorChat.Shared.Joueur>(
#nullable restore
#line 52 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                         Joueur

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(40, "hubConnection", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.SignalR.Client.HubConnection>(
#nullable restore
#line 52 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                                                 hubConnection

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(41, "\r\n");
#nullable restore
#line 53 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
}

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(42, "\r\n");
#nullable restore
#line 55 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
 if (Joueur != null && Joueur.EtapeJeu == EtapeJeu.EcranDeFin)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(43, "    ");
            __builder.OpenComponent<BlazorChat.Client.Pages.QuatreMots.EcranDeFin>(44);
            __builder.AddAttribute(45, "Joueur", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<BlazorChat.Shared.Joueur>(
#nullable restore
#line 57 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                         Joueur

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(46, "hubConnection", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.SignalR.Client.HubConnection>(
#nullable restore
#line 57 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
                                                 hubConnection

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.AddMarkupContent(47, "\r\n");
#nullable restore
#line 58 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 64 "C:\Users\crapo\source\repos\BlazorChat\BlazorChat\Client\Pages\FourWords.razor"
       

    private HubConnection hubConnection;
    private string pseudo = "";
    private bool Connecte = false;
    private Joueur Joueur = null;
    private bool PartieEnCours = false;


    private int nbJoueursConnectes = 0;

    protected override async Task OnInitializedAsync()
    {
        hubConnection = new HubConnectionBuilder()
            .WithUrl(NavigationManager.ToAbsoluteUri("/FourWords"))
            .Build();

        hubConnection.On<int>("NombreJoueurs", (nbJoueurs) =>
        {
            nbJoueursConnectes = nbJoueurs;
            _logger.LogInformation("Nombre Joueur");
            StateHasChanged();
        });

        hubConnection.On<string>("InfoJoueur", (retour) =>
        {
            _logger.LogInformation(retour);

            try
            {
                Joueur = JsonSerializer.Deserialize<Joueur>(retour);
            }
            catch (Exception e)
            {
                _logger.LogInformation(e.Message);
                Joueur = null;
            }
            StateHasChanged();
        });

        hubConnection.On<bool>("PartieEnCours", (enCours) =>
        {
            PartieEnCours = enCours;
            StateHasChanged();
        });


        await hubConnection.StartAsync();
        await hubConnection.SendAsync("Initialiser");
    }

    public bool IsConnected => hubConnection?.State == HubConnectionState.Connected;


    public async Task Jouer()
    {
        await hubConnection.SendAsync("Jouer", pseudo, hubConnection.ConnectionId);
        Connecte = true;
    }


    public void Dispose()
    {
        _logger.LogInformation("Dispose");
        Task.Run(() =>
        {
            hubConnection.SendAsync("Deconnecter", pseudo, hubConnection.ConnectionId);
        }).Wait();

        _ = hubConnection.DisposeAsync();
    }



#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILogger<FourWords> _logger { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
    }
}
#pragma warning restore 1591
